<template>
  <div>
    <div class="container">
      <div class="breadCrumbs">
        <a href="/">首页</a>
        &gt;
        <a>装饰品</a>
        &gt;
        <a>装饰摆件</a>
      </div>
      <div class="PListWrapper">
        <div class="productSideW fl">
          <div class="productSide" id="side">
            <h3>品 类 Category</h3>
            <h4>
              <a>装饰品频道</a>
            </h4>
            <dl>
              <dt>
                <span></span>
                <a >花/花瓶</a>
              </dt>

              <dd style="display: none;">
                <ul class="subnav">
                  <li>
                    <a >花</a>
                  </li>
                  <li>
                    <a>花盆</a>
                  </li>
                  <li>
                    <a>花瓶</a>
                  </li>
                  <li>
                    <a >盆栽/盆景</a>
                  </li>
                  <li>
                    <a>花瓶填充物</a>
                  </li>
                </ul>
              </dd>
            </dl>
            <dl class="open">
              <dt>
                <span></span>
                <a>装饰摆件</a>
              </dt>

              <dd style="display: block;">
                <ul class="subnav">
                  <li>
                    <a >座钟</a>
                  </li>
                  <li>
                    <a >各类摆饰</a>
                  </li>
                  <li>
                    <a >书桌摆件</a>
                  </li>
                  <li>
                    <a>相框</a>
                  </li>
                </ul>
              </dd>
            </dl>
            <dl>
              <dt>
                <span></span>
                <a>蜡烛/烛台</a>
              </dt>

              <dd style="display: none;">
                <ul class="subnav">
                  <li>
                    <a>风灯</a>
                  </li>
                  <li>
                    <a>蜡烛</a>
                  </li>
                  <li>
                    <a >烛台</a>
                  </li>
                </ul>
              </dd>
            </dl>
            <dl>
              <dt>
                <span></span>
                <a >收纳容器</a>
              </dt>

              <dd style="display: none;">
                <ul class="subnav">
                  <li>
                    <a>套件</a>
                  </li>
                  <li>
                    <a >装饰储物罐</a>
                  </li>
                  <li>
                    <a >篮筐</a>
                  </li>
                  <li>
                    <a>装饰盒</a>
                  </li>
                  <li>
                    <a >托盘/装饰碗</a>
                  </li>
                </ul>
              </dd>
            </dl>
            <dl>
              <dt>
                <span></span>
                <a>卫浴/熏香/镜子</a>
              </dt>

              <dd style="display: none;">
                <ul class="subnav">
                  <li>
                    <a >卫浴用品</a>
                  </li>
                  <li>
                    <a >熏香</a>
                  </li>
                  <li>
                    <a>镜子</a>
                  </li>
                </ul>
              </dd>
            </dl>
            <h3>特色 Features</h3>
            <ul class="subnav">
              <li>
                <a >新品</a>
              </li>
              <li>
                <a >促销</a>
              </li>
              <li>
                <a>夏季装饰</a>
              </li>
            </ul>
            <h3 data-type="sub312" style="display:none;">窗帘定制服务 Service</h3>
            <ul class="subnav" data-type="sub312" style="display:none;">
              <li>
                <a >1 选择窗帘款式</a>
              </li>
              <li>
                <a >2 选择面料及配件</a>
              </li>
              <li>
                <a >3 尺寸测量说明</a>
              </li>
              <li>
                <a >4 价格计算说明</a>
              </li>
            </ul>

          </div>
          <div class="advert">
            <a target="_blank">
              <img title src="../../../public/img/images/UploadFile/UeditorUP/20150324/6356281127471795297694180.jpg" />
            </a>
          </div>
        </div>

        <div class="product_list fr">
          <div class="Pbanner">
            <img src="../../../public/img/images/UploadFile/CategoryFile/装饰摆件.jpg" />
          </div>

          <a name="pg">&nbsp;</a>

          <div class="product_story clearfix" style>
            <div class="clearfix">
              <div class="storyBy fl">
                <ul>
                  <li>
                    <div class="condition w84">
                      <dl>
                        <dt>
                          价格
                          <span class="select_arrow"></span>
                        </dt>
                        <dd class="dropDown hide">
                          <ul>
                            <li>
                              <a rel="nofollow">
                                <ins style>1-500</ins>
                                <span>(34)</span>
                              </a>
                            </li>
                            <li>
                              <a rel="nofollow">
                                <ins style>501-1000</ins>
                                <span>(11)</span>
                              </a>
                            </li>
                            <li>
                              <a rel="nofollow">
                                <ins style>1001-2000</ins>
                                <span>(4)</span>
                              </a>
                            </li>
                          </ul>
                        </dd>
                      </dl>
                    </div>
                  </li>
                  <li>
                    <div
                      class="condition small"
                      onclick="javascript:location.href='/product-list-single-568/1-0-0-salessort-desc#pg'"
                    >
                      <a>销量</a>
                    </div>
                  </li>
                  <li>
                    <div
                      class="condition small"
                      onclick="javascript:location.href='/product-list-single-568/1-0-0-promotionprice-asc#pg'"
                    >
                      <a>价格</a>
                      <span class="asc"></span>
                    </div>
                  </li>
                  <li>
                    <div
                      class="condition small"
                      onclick="javascript:location.href='/product-list-single-568/1-0-0-newsort-desc#pg'"
                    >
                      <a>新品</a>
                    </div>
                  </li>
                  <li></li>
                </ul>
              </div>
              <div class="pagination fr">
                <ul>
                  <li class="ptext">1/2</li>
                  <li>
                    <a href="javascript:void(0);" class="prev disable"></a>
                  </li>
                  <li>
                    <a class="next"></a>
                  </li>
                </ul>
              </div>
              <div class="merge fr">
                <span
                  class="folder"
                  onclick="javascript:location.href='/product-list-sku-568/1#pg'"
                ></span>
                <a >取消合并</a>
              </div>
            </div>
            <div class="s_category hide"></div>
          </div>
          <div class="Pwrapper clearfix">
            <div class="product" v-for="(item,i) of list" :key="i">
              <div class="img">
                <a :title="item.title" target="_blank">
                  <img
                    data-defurl="'http://127.0.0.1:4000/'+item.lg"
                    :src="'http://127.0.0.1:4000/'+item.lg"
                  />
                  <img
                    class="hoverSwap scrollLoading"
                    data-defurl="'http://127.0.0.1:4000/'+item.md"
                    :src="'http://127.0.0.1:4000/'+item.md"
                  />
                </a>
              </div>
              <div class="product_gallery" style="margin-left: 0px;">
                <ul style="width: 38px;">
                  <li class="active">
                    <img
                      :src="'http://127.0.0.1:4000/'+item.sm"
                      data-defurl="'http://127.0.0.1:4000/'+item.sm"
                      alt="114836"
                      :title="item.title"
                    />
                  </li>
                </ul>
              </div>
              <h4>
                <a
                  :title="item.title"
                  target="_blank"
                >{{item.title}}</a>
              </h4>

              <p class="price">
                ￥{{item.price}}
                <span class="label">New</span>
                <button @click="addcart(item.pid,item.title,item.price)">加入购物车</button>
              <button size="large" @click="findCart">查看购物车</button>
              </p>
            </div>
          </div>
          <div class="pagination PT30 clearfix">
            <ul>
              <li>
                <a href="javascript:void(0);" class="first disable"></a>
              </li>
              <li>
                <a href="javascript:void(0);" class="prev disable"></a>
              </li>
              <li class="ptext">1/2</li>
              <li>
                <a class="next"></a>
              </li>
              <li>
                <a class="last"></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <my-footer></my-footer>
  </div>
</template>

<script>
import MyFooter from "../../components/common/MyFooter";
export default {
  data() {
    return {
      list: [],
      pno: 1
    };
  },
  components: {
    MyFooter
  },
  created() {
    this.loadMore();
  },
  methods: {
    toggle: function(ev) {
      var $title = $(ev.target);
      $title
        .parents("#side")
        .find(".item")
        .hide();
      $title.next().show(1000);
    },
    findCart() {
      this.$router.push("/Cart");
    },
    loadMore() {
      var url = "paint";
      var obj = {
        pno: this.pno
      };
      this.axios.get(url, { params: obj }).then(res => {
        console.log(res);
        this.list = res.data.data;
      });
    },
    addcart(lid, lname, price) {
      console.log(1);
      console.log(lid + "" + lname + "" + price);
      // 功能:将商品信息添加至购物车
      // 1.创建变量url保存请求服务器地址
      var url = "addcart";
      // 2.创建变量obj请求服务器地址
      var obj = { lid, lname, price };
      // 3.发送ajax请求
      this.axios
        .get(url, { params: obj })
        // 4.接收服务器返回数据
        .then(res => {
          // 5.判断code==-1提示请登录 跳转/Login组件
          // 6.判断code==1 提示添加成功
          if (res.data.code == -2) {
            this.$toast("请登录");
            this.$router.push("/Login");
          } else {
            this.$toast("添加成功");
            // this.$router.push("/AddCart")
          }
        });
    }
  }
};
</script>

<style>
</style>